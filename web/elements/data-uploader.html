<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="data-uploader">
  <style>

  </style>

  <template>
    <input
      id="input"
      type="file"
      on-change="_handleChange"
      hidden>
  </template>

  <script>
    Polymer({
      is: "data-uploader",

      properties: {
        data: {
          type: String,
          notify: true,
          value: null,
          readOnly: true
        }
      },

      upload: function () {
        this.$.input.click();
      },

      _handleChange: function (event) {
        var files = event.target.files;
        if (files.length == 0) return;
        var file = files[0];
        var reader = new FileReader();
        var self = this;
        reader.onload = function (e) {
          self._setData(e.target.result);
        };
        reader.readAsText(file);
      }
    });
  </script>
</dom-module>
