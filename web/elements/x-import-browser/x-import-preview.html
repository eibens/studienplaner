<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../x-remote-file/x-remote-file.html">

<dom-module id="x-import-preview">
  <style>

  </style>

  <template>
    <x-remote-file
      id="file"
      url="[[url]]"
      ping-url="[[pingUrl]]"
      data="{{_profile}}"
      status="{{_status}}">
    </x-remote-file>

    <p>Status: <em>[[_status]]</em></p>
    <p>Titel: <em>[[_computeTitle(_profile.name)]]</em></p>
    <p>Kurse: <em>[[_computeCourses(_profile.courses.*)]]</em></p>
  </template>

  <script>
    Polymer({
      is: "x-import-preview",

      properties: {
        url: {
          type: String
        },

        pingUrl: {
          type: String
        },

        _profile: {
          type: Object
        },

        _status: {
          type: String
        }
      },

      _computeTitle: function (name) {
        return name ? name : "Unbenanntes Profil";
      },

      _computeCourses: function (change) {
        if (!(change.base instanceof Array)) return 0;
        return change.base.length;
      }
    });
  </script>
</dom-module>
