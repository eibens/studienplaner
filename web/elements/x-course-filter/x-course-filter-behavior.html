<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../data-model/data-model.html">

<script>
  var App = App || {};
  App.CourseFilterBehavior = {

    properties: {

      parameters: {
        type: Object,
        value: new CourseCriteria(),
        notify: true
      },

      cleared: {
        type: Boolean,
        readOnly: true,
        value: true,
        notify: true
      }
    },

    observers: [
      "_changed(parameters.*)"
    ],

    clear: function () {
      if (this.cleared) return;
      this.parameters = new CourseCriteria();
    },

    _changed: function (parametersChange) {
      var cleared = this._isCleared(parametersChange.base);
      if (this.cleared && cleared) return;
      this._setCleared(cleared);
    },

    _isCleared: function (params) {
      return !params ||
        params.query.length == 0 &&
        params.allowedTypes.length == 0 &&
        params.allowedGrades.length == 0 &&
        params.requiredTags.length == 0 &&
        params.forbiddenTags.length == 0;
    },

    _isNonEmptyArray: function (object) {
      return (object instanceof Array) && object.length > 0;
    }
  };
</script>
