<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="data-service">
  <template>
    <array-selector
      id="course"
      items="{{courses}}"
      selected="{{course}}">
    </array-selector>
  </template>

  <script>
    Polymer({
      is: "data-service",

      properties: {
        courses: {
          type: Array,
          value: [],
          notify: true
        },
        course: {
          type: Object,
          value: null,
          notify: true
        }
      },

      ready: function () {
        this.addCourse({
          type: "VU",
          title: "Verteilte Systeme",
          credits: 3.0
        });
        this.addCourse({
          type: "VO",
          title: "Statistik und Wahrscheinlichkeitstheorie",
          credits: 3.0
        });
        this.addCourse({
          type: "UE",
          title: "Algebra und diskrete Mathematik",
          credits: 3.0
        });
      },

      containsCourse: function (course) {
        return this.courses.indexOf(course) >= 0;
      },

      selectCourse: function (course) {
        if (course != null && !this.containsCourse(course)) throw new Error("Cannot select unknown course.");
        this.$.course.select(course);
      },

      addCourse: function (course) {
        if (this.containsCourse(course)) throw new Error("Course already added.");
        this.push("courses", course);
      },

      deleteCourse: function (course) {
        if (!this.containsCourse(course)) throw new Error("Cannot delete unknown course.");
        var index = this.courses.indexOf(course);
        this.splice("courses", index, 1);
        this.$.course.select(null);
      }
    });
  </script>
</dom-module>
