<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="data-downloader.html">
<link rel="import" href="data-model/data-model.html">
<link rel="import" href="data-storage.html">
<link rel="import" href="data-uploader.html">

<dom-module id="data-manager">
  <style>

  </style>

  <template>
    <data-storage
      profile="{{profile}}"
      dirty="{{dirty}}"
      raw-data="{{_rawData}}">
    </data-storage>
    <data-downloader
      id="downloader"
      file="{{_computeFile}}"
      data="[[_rawData]]">
    </data-downloader>
    <data-uploader
      id="uploader"
      data="{{_rawData}}">
    </data-uploader>
  </template>

  <script>
    Polymer({
      is: "data-manager",

      properties: {
        profile: {
          type: Object,
          value: null,
          notify: true
        },
        dirty: {
          type: Boolean,
          notify: true
        },
        _rawData: {
          type: String
        }
      },

      clear: function () {
        this.profile = new Profile();
      },

      export: function () {
        this.$.downloader.download();
      },

      import: function () {
        this.$.uploader.upload();
      }
    });
  </script>
</dom-module>
